<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width" charset="utf-8">
    <title>GetSocial Cordova SDK</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/cayman.min.css">
    <link rel="stylesheet" href="css/prism.min.css">
    <link rel="stylesheet" href="css/index.min.css">
    <link rel="stylesheet" href="css/docs.min.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
  </head>
  <body data-spy="scroll" data-target=".scrollspy">
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container"><a class="brand">Mr. Doc</a>
          <div class="nav-collapse collapse">
            <ul class="nav pull-right sponsored"></ul>
          </div>
        </div>
      </div>
    </div>
    <header id="overview" class="jumbotron subhead">
      <div class="container">
        <h1>GetSocial Cordova SDK</h1>
        <p class="lead"></p>
      </div>
    </header>
    <div class="container">
      <div class="row">
        <div class="span3 bs-docs-sidebar">
          <ul class="nav nav-list bs-docs-sidenav affix-top">
            <li><a href="index.html">Main</a></li>
            <li><a href="ActivitiesViewBuilder.js.html">ActivitiesViewBuilder.js</a></li>
            <li><a href="Configuration.js.html">Configuration.js</a></li>
            <li><a href="CurrentUser.js.html">CurrentUser.js</a></li>
            <li class="active"><a href="GetSocial.js.html">GetSocial.js</a></li>
            <li><a href="NotificationsViewBuilder.js.html">NotificationsViewBuilder.js</a></li>
            <li><a href="SmartInviteViewBuilder.js.html">SmartInviteViewBuilder.js</a></li>
            <li><a href="UserListViewBuilder.js.html">UserListViewBuilder.js</a></li>
            <li><a href="chat/ChatListViewBuilder.js.html">chat/ChatListViewBuilder.js</a></li>
            <li><a href="chat/ChatViewBuilder.js.html">chat/ChatViewBuilder.js</a></li>
            <li><a href="chat/GetSocialChat.js.html">chat/GetSocialChat.js</a></li>
            <li><a href="entity/Leaderboard.js.html">entity/Leaderboard.js</a></li>
            <li><a href="entity/LeaderboardMetaData.js.html">entity/LeaderboardMetaData.js</a></li>
            <li><a href="entity/LeaderboardScore.js.html">entity/LeaderboardScore.js</a></li>
            <li><a href="entity/User.js.html">entity/User.js</a></li>
            <li><a href="plugin/InvitePlugin.js.html">plugin/InvitePlugin.js</a></li>
            <li><a href="plugin/Plugin.js.html">plugin/Plugin.js</a></li>
          </ul>
          <div class="scrollspy">
            <ul class="nav nav-list bs-docs-sidenav affix-top">
              <li><a href="#SmartInviteViewBuilder"><i class="alert alert-success"></i><span>SmartInviteViewBuilder</span></a>
              </li>
            </ul>
          </div>
        </div>
        <div class="span9">
          <div class="description"><p>Copyright 2015-2016 GetSocial B.V.</p><p> Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);<br /> you may not use this file except in compliance with the License.<br /> You may obtain a copy of the License at</p><pre><code> http://www.apache.org/licenses/LICENSE-2.0
</code></pre><p> Unless required by applicable law or agreed to in writing, software<br /> distributed under the License is distributed on an &quot;AS IS&quot; BASIS,<br /> WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br /> See the License for the specific language governing permissions and<br /> limitations under the License.</p></div>
          <section id="SmartInviteViewBuilder">
            <h1>SmartInviteViewBuilder</h1>
            <h5 class="subheader"></h5>
            <p>
              <div class="label label-success radius ctx-type">declaration</div><span>&nbsp;</span><span>SmartInviteViewBuilder</span><span>&nbsp;</span>
            </p>
          </section>
          <div class="description"><p>global cordova, module</p></div>
          <pre><code class="language-javascript">var SmartInviteViewBuilder = require('./SmartInviteViewBuilder')
var Leaderboard = require('./Leaderboard')

var NATIVE_BRIDGE_NAME = &quot;GetSocialCordova&quot;;

var INVITE_FRIENDS_EVENTS = {
    ON_INVITE_FRIENDS_INTENT_EVENT: 0,
    ON_INVITED_FRIENDS_EVENT: 1
}

var PLUGIN_EVENT = {
    INVITE_FRIENDS: &quot;inviteFriends&quot;,
    INIT_CALLBACK_ID: &quot;initCallbackId&quot;
}

var SCORES_TYPE = {
    SCORE_TYPE_WORLD: &quot;score_type_world&quot;,
    SCORE_TYPE_FOLLOWING: &quot;score_type_following&quot;,
    SCORE_TYPE_OTHERS: &quot;score_type_others&quot;
}

var GetSocial = function() {

    this.instance = null;

    this.onErrorPlugin = function(err) {
        console.log(err);
    }
}



/// &lt;summary&gt;
/// Return GetSocial instance
/// &lt;/summary&gt;
GetSocial.getInstance = function () {
    if (!this.instance) {
        this.instance = new GetSocial();
    }
    return this.instance;
}


/// &lt;summary&gt;
/// The method sets your app login data, it must be called before using any other functionality offered by the SDK.
/// &lt;/summary&gt;
/// &lt;param name=&quot;key&quot;&gt;Your app's key, can be found in the GetSocial developer console&lt;/param&gt;
/// &lt;param name=&quot;onSuccess&quot;&gt;Action called if operation was successful. Optional.&lt;/param&gt;
/// &lt;param name=&quot;onFailure&quot;&gt;Action called if operation failed to complete. Optional.&lt;/param&gt;
GetSocial.prototype.init = function(key, onSuccess, onFailure) {
    cordova.exec(onSuccess, onFailure, NATIVE_BRIDGE_NAME, &quot;init&quot;, [key]);
}

/// &lt;summary&gt;
/// Returns the current SDK version
/// &lt;/summary&gt;
/// &lt;param name=&quot;onResult&quot;&gt;Action called with version as argument.&lt;/param&gt;
GetSocial.prototype.getVersion = function (onResult) {
    cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;getVersion&quot;, []);
}
/// &lt;summary&gt;
/// Returns the current SDK APIversion
/// &lt;/summary&gt;
/// &lt;param name=&quot;onResult&quot;&gt;Action called with apiversion as argument.&lt;/param&gt;
GetSocial.prototype.getApiVersion = function (onResult) {
    cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;getApiVersion&quot;, []);
}
/// &lt;summary&gt;
/// Returns the current Environment
/// &lt;/summary&gt;
/// &lt;param name=&quot;onResult&quot;&gt;Action called with Environment as argument. Can &lt;c&gt;Android&lt;/c&gt; or &lt;c&gt;iOS&lt;/c&gt; &lt;/param&gt;
GetSocial.prototype.getEnvironment = function (onResult) {
    cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;getEnvironment&quot;, []);
}
/// &lt;summary&gt;
/// Returns all supported invite providers.
/// &lt;/summary&gt;
/// &lt;param name=&quot;onResult&quot;&gt;Action called with array containing constants id's for all supported providers&lt;/returns&gt;
GetSocial.prototype.getSupportedInviteProviders = function (onResult) {
    cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;getSupportedInviteProviders&quot;, []);
}
/// &lt;summary&gt;
/// Returns configuration.
/// &lt;/summary&gt;
/// &lt;param name=&quot;onResult&quot;&gt;Action called with null as argument.&lt;/param&gt;
GetSocial.prototype.getConfiguration = function (onResult) {
    cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;getConfiguration&quot;, []);
}

GetSocial.prototype.setOnUserAvatarClickHandler = function(onResult) {
    cordova.exec(function(data) {
                         //data = JSON.parse(data);
                         var user = new GetSocial.CurrentUser(data.user);
                         onResult(user, data.source);
                     }, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;setOnUserAvatarClickHandler&quot;);
}

GetSocial.prototype.setOnAppAvatarClickHandler = function(onResult) {
    cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;setOnAppAvatarClickHandler&quot;);
}

GetSocial.prototype.setOnActivityActionClickListener = function(onResult) {
    cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;setOnActivityActionClickListener&quot;);
}

GetSocial.prototype.setOnInviteButtonClickListener = function(onResult) {
    cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;setOnInviteButtonClickListener&quot;);
}

GetSocial.prototype.setOnActionPerformListener = function(onResult) {
    cordova.exec(function(data) {
       onResult(data.action, data.actionFinalizerHash);
    }, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;setOnActionPerformListener&quot;, []);
}

GetSocial.prototype.finalizeAction = function(actionFinalizerHash, value, onResult) {
    cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;finalizeAction&quot;, [actionFinalizerHash, value]);
}


/// &lt;summary&gt;
/// Provide a method that implements &lt;c&gt;OnReferralDataReceived&lt;/c&gt; delegate if you would like to get referral data if the user installs or opens the app after opening a Smart Invite .
/// &lt;/summary&gt;
/// &lt;param name=&quot;onReferralDataReceived&quot;&gt;Return refferalData in format [{key:value, key2:value2}, ...]&lt;/param&gt;
GetSocial.prototype.setOnReferralDataReceivedListener = function (onReferralDataReceived) {
    cordova.exec(onReferralDataReceived, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;setOnReferralDataReceivedListener&quot;, []);
}

/// &lt;summary&gt;
/// Sets the actions to be called when smart invites are triggered
/// &lt;/summary&gt;
/// &lt;param name=&quot;onInviteFriendsIntent&quot;&gt;Action to be called when user clicked on specific invite provider.&lt;/param&gt;
/// &lt;param name=&quot;onFriendsInvited&quot;&gt;Action to be called when user send invites. Gets number of invitations sent as a parameter.&lt;/param&gt;
GetSocial.prototype.setOnInviteFriendsListener = function (onInviteFriendsIntent, onFriendsInvited ) {
        cordova.exec(function(jsonObj) {
            if(jsonObj != undefined) {
                if(jsonObj.Event == INVITE_FRIENDS_EVENTS.ON_INVITE_FRIENDS_INTENT_EVENT) {
                    onInviteFriendsIntent();
                } else if(jsonObj.Event == INVITE_FRIENDS_EVENTS.ON_INVITED_FRIENDS_EVENT) {
                    onFriendsInvited(jsonObj.InvitedFriends);
                }
            }
        }, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;setOnInviteFriendsListener&quot;, []);
}
/// &lt;summary&gt;
/// Invite friends through a specific invite provider.
/// &lt;/summary&gt;
/// &lt;param name=&quot;provider&quot;&gt;The provider through which the invite will be sent.&lt;/param&gt;
/// &lt;param name=&quot;subject&quot;&gt;The subject to be sent with the invite. If it is null the default subject set on DevPortal is sent.&lt;/param&gt;
/// &lt;param name=&quot;text&quot;&gt;The text to be sent with the invite. NOTE: you can use following tags to customize text: [APP_INVITE_URL] - tag is replaced with url to download the app; [APP_NAME] - tag is replaced with app name configured on the GetSocial Developer Portal. If it is null the default text set on DevPortal is sent.&lt;/param&gt;
/// &lt;param name=&quot;imagePath&quot;&gt;The image path, or null if no image should be shown.&lt;/param&gt;
/// &lt;param name=&quot;referralData&quot;&gt;The bundle to be sent with the invite. It can be null.&lt;/param&gt;
/// &lt;param name=&quot;onResult&quot;&gt;Action called when invoke inviteFriendsUsingProvider.&lt;/param&gt;
GetSocial.prototype.inviteFriendsUsingProvider = function (provider, subject, text, imagePath, referralData, onResult) {
        var option = {}
        if(provider == null) {
            errorCallback(&quot;Please set provider value&quot;);
            return
        }
        option.provider = provider;

        if(subject != null) {
            option.subject = subject;
        }
        if(text != null) {
           option.text = text;
        }

        if(imagePath != null) {
           option.imagePath = imagePath;
        }

        if(referralData != null) {
           option.referrals = referralData;
        }

        cordova.exec(onResult, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;inviteFriendsUsingProvider&quot;, [option]);
    }
/// &lt;summary&gt;
/// Register a new instance of a plugin for a specified provider.
/// &lt;/summary&gt;
/// &lt;param name=&quot;plugin&quot;&gt;An instance of a plugin implementation&lt;/param&gt;
/// &lt;param name=&quot;onResult&quot;&gt;Action called with callbackId as argument.&lt;/param&gt;
GetSocial.prototype.registerPlugin = function (onResult, plugin) {
    if (!(plugin instanceof GetSocial.InvitePlugin))
        return false;

    cordova.exec(function(data) {
        var action = data.action;
        if(action == null)
            return;

        if (action === PLUGIN_EVENT.INIT_CALLBACK_ID) {
            plugin.setCallbackId(data.callbackId)
            onResult(data.callbackId);
        }
        if(action === PLUGIN_EVENT.INVITE_FRIENDS) {
            var subject = data.subject;
            var text = data.text;
            var referralDataUrl = data.referralDataUrl;
            var image = data.image;
            plugin.inviteFriends(subject, text, referralDataUrl, image);
        }

    }, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;registerPlugin&quot;, [plugin.getOptions()]);
}

/// &lt;summary&gt;
/// Return CurrentUser.
/// &lt;/summary&gt;
/// &lt;param name=&quot;onResult&quot;&gt;Action called with user data in json as argument.&lt;/param&gt;
GetSocial.prototype.getCurrentUser = function(onResult) {
    cordova.exec(function(data) {
        //if(typeof data === 'string') {
            data = JSON.parse(data);
        //}
        var user = new GetSocial.CurrentUser(data);
        onResult(user);
    }, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;getCurrentUser&quot;, []);
}

/// &lt;summary&gt;
/// Post an activity on the activity feed.
/// &lt;/summary&gt;
/// &lt;param name=&quot;text&quot;&gt;The text of the activity, or null if no text should be shown.&lt;/param&gt;
/// &lt;param name=&quot;imagePath&quot;&gt;The image path, or null if no image should be shown.&lt;/param&gt;
/// &lt;param name=&quot;buttonText&quot;&gt;The text of the activity button, or null if no button text should be shown.&lt;/param&gt;
/// &lt;param name=&quot;actionId&quot;&gt;The action generated on click, or null if no button or image is shown.&lt;/param&gt;
/// &lt;param name=&quot;tags&quot;&gt;Tags for user segmentation.&lt;/param&gt;
/// &lt;param name=&quot;onSuccess&quot;&gt;Action called if operation was successful.&lt;/param&gt;
/// &lt;param name=&quot;onFailure&quot;&gt;Action called if operation failed to complete.&lt;/param&gt;
GetSocial.prototype.postActivity = function(text, imagePath, buttonText, actionId, tags, onResult, onError) {
    var option = {};
    if(text != null)
        option.text = text;

    if(imagePath != null) 
        option.imagePath = imagePath;

    if(buttonText != null) 
        option.buttonText = buttonText;

    if(actionId != null) 
        option.actionId = actionId;

    if(tags != null) 
        option.tags = tags;

    cordova.exec(onResult, onError, NATIVE_BRIDGE_NAME, &quot;postActivity&quot;, [option]);
}

/// &lt;summary&gt;
/// Sets the action to be called when new chat message or notification arrives. First param is new notifications number, second - unread chat messages number.
/// &lt;/summary&gt;
GetSocial.prototype.setOnUnreadNotificationsCountChangeListener = function(onUnreadNotificationsCountChangeListener) {
    cordova.exec(onUnreadNotificationsCountChangeListener, this.onErrorPlugin, NATIVE_BRIDGE_NAME, &quot;setOnUnreadNotificationsCountChangeListener&quot;, []);
}

GetSocial.prototype.getLeaderboard = function(leaderboard, onResult, onError) {
    cordova.exec(function(data) {
        data = JSON.parse(data);

        var leaderboard = new GetSocial.Leaderboard(data);

        onResult(leaderboard);
    }, onError, NATIVE_BRIDGE_NAME, &quot;getLeaderboard&quot;, [leaderboard]);
}

GetSocial.prototype.getLeaderboards = function(leaderboards, end, onResult, onError) {
    if( Array.isArray(leaderboards)) {
        cordova.exec(function(data) {
            console.log(data);
            var result = [];
            for(var i=0; i &lt; data.length; i++ ) {
                result.push(new GetSocial.Leaderboard(JSON.parse(data[i])));
            }

            end(result);
        }, onResult, NATIVE_BRIDGE_NAME, &quot;getLeaderboardsArray&quot;, [leaderboards]);
    } else if(typeof leaderboards == 'number' &amp;&amp; typeof end == 'number') {
        cordova.exec(function(data) {
            console.log(data);
            var result = [];
            for(var i=0; i &lt; data.length; i++ ) {
                result.push(new GetSocial.Leaderboard(JSON.parse(data[i])));
            }

            onResult(result);
        }, onError, NATIVE_BRIDGE_NAME, &quot;getLeaderboardsInterval&quot;, [leaderboards, end]);
    }
}

GetSocial.prototype.getLeaderboardScores = function(leaderboard, start, end, type, onResult, onError) {
    var object = {
        id: leaderboard,
        start: start,
        end: end,
        type: type
    };
    cordova.exec(function(data) {
        var result = [];
        for(var i=0; i &lt; data.length; i++) {
            if(typeof data[i]  === 'string') {
                data[i] = JSON.parse(data[i]);
            }
            result.push(new GetSocial.LeaderboardScore(data[i]));
        }
        onResult(result);
    }, onError, NATIVE_BRIDGE_NAME, &quot;getLeaderboardScores&quot;, [object]);
}

GetSocial.prototype.submitLeaderboardScore = function(leaderboardId, value, onResult, onError) {
    var object = {
        id: leaderboardId,
        value: value
    };
    cordova.exec(onResult, onError, NATIVE_BRIDGE_NAME, &quot;submitLeaderboardScore&quot;, [object]);
}

GetSocial.prototype.submitLeaderboardScore = function(leaderboardId, value, onResult, onError) {
    var object = {
        id: leaderboardId,
        value: value
    };
    cordova.exec(onResult, onError, NATIVE_BRIDGE_NAME, &quot;submitLeaderboardScore&quot;, [object]);
}

GetSocial.prototype.save = function(data, onResult, onError) {
    cordova.exec(onResult, onError, NATIVE_BRIDGE_NAME, &quot;cloudSaveData&quot;, [data]);
}

GetSocial.prototype.getLastSave = function(onResult, onError) {
    cordova.exec(onResult, onError, NATIVE_BRIDGE_NAME, &quot;getCloudSaveData&quot;, []);
}

GetSocial.prototype.setLanguage = function(language, onResult, onError) {
    cordova.exec(onResult, onError, NATIVE_BRIDGE_NAME, &quot;setLanguage&quot;, [language]);
}

GetSocial.prototype.getLanguage = function(onResult, onError) {
    cordova.exec(onResult, onError, NATIVE_BRIDGE_NAME, &quot;getLanguage&quot;, []);
}


module.exports = GetSocial;</code></pre>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <p>Documentation generated with <a href="https://github.com/mr-doc/mr-doc">Mr. Doc </a> created by <a href="https://twitter.com/FGRibreau" data-show-count="false" class="twitter-follow-button">Francois-Guillaume Ribreau </a></p>
        <p>Mr. Doc is sponsored by <a href="http://bringr.net/?btt" title="Outil d'analyse des rÃ©seaux sociaux" class="bringr">Bringr </a> and <a href="https://redsmin.com/?btt" title="Full Redis GUI" class="redsmin">Redsmin</a></p>
        <p>Theme borrowed from Twitter Bootstrap</p>
      </div>
    </footer>
    <script src="js/twitter-widget.min.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap-transition.min.js"></script>
    <script src="js/bootstrap-scrollspy.min.js"></script>
    <script src="js/bootstrap-dropdown.min.js"></script>
    <script src="js/bootstrap-collapse.min.js"></script>
    <script src="js/bootstrap-affix.min.js"></script>
    <script src="js/prism.min.js"></script>
    <script src="js/index.min.js"></script>
  </body>
</html>